<!DOCTYPE html>
<html lang="en">
<!-- ... existing code ... -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Banner Tables Debug</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4">Supabase Banner Tables Debug</h1>
        <div class="mb-4">
            <a href="index.html" class="btn btn-primary">Back to Main App</a>
        </div>

        <div class="alert alert-info">
            This temporary page fetches and displays the raw contents of the Supabase tables
            <code>Character Banners</code> and <code>Support Card Banners</code> to help debug data issues.
        </div>

        <div class="card mb-4">
            <div class="card-header bg-dark text-white">Character Banners</div>
            <div class="card-body">
                <div id="characterStatus" class="text-muted">Loading...</div>
                <pre id="characterData" class="bg-body-secondary p-3 rounded" style="white-space: pre-wrap; word-break: break-word;"></pre>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">Support Card Banners</div>
            <div class="card-body">
                <div id="supportStatus" class="text-muted">Loading...</div>
                <pre id="supportData" class="bg-body-secondary p-3 rounded" style="white-space: pre-wrap; word-break: break-word;"></pre>
            </div>
        </div>

        <div id="errorBox" class="alert alert-danger d-none"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const supabaseUrl = 'https://guceyenzaktklmpbcjph.supabase.co';
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd1Y2V5ZW56YWt0a2xtcGJjanBoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MzkwNjEsImV4cCI6MjA3NTIxNTA2MX0.XrSUj3Fp4FnhSJRKJesIM5x_YFT14m-pOaCfAOEiNBI';

        const client = supabase.createClient(supabaseUrl, supabaseAnonKey);

        async function fetchTable(tableName, fallbackName, statusEl, dataEl) {
            statusEl.textContent = `Querying table: ${tableName}`;
            try {
                const { data, error } = await client.from(tableName).select('*');
                if (error) {
                    if (fallbackName) {
                        statusEl.textContent = `Primary table failed (${error.message}). Trying fallback: ${fallbackName}`;
                        const fallbackResult = await client.from(fallbackName).select('*');
                        if (fallbackResult.error) {
                            throw fallbackResult.error;
                        }
                        statusEl.textContent = `Loaded ${fallbackResult.data.length} rows from fallback: ${fallbackName}`;
                        dataEl.textContent = JSON.stringify(fallbackResult.data, null, 2);
                        return;
                    }
                    throw error;
                }
                statusEl.textContent = `Loaded ${data.length} rows from ${tableName}`;
                dataEl.textContent = JSON.stringify(data, null, 2);
            } catch (err) {
                console.error(`Error loading ${tableName}:`, err);
                statusEl.textContent = `Error loading data from ${tableName}`;
                dataEl.textContent = '';
                const errorBox = document.getElementById('errorBox');
                errorBox.classList.remove('d-none');
                errorBox.innerHTML += `<div><strong>${tableName}</strong>: ${err.message || err}</div>`;
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            await fetchTable('Character Banners', 'character_banners',
                document.getElementById('characterStatus'),
                document.getElementById('characterData'));

            await fetchTable('Support Card Banners', 'support_card_banners',
                document.getElementById('supportStatus'),
                document.getElementById('supportData'));
        });
    </script>
</body>
</html>
